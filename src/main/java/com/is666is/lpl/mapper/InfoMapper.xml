<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.is666is.lpl.mapper.InfoMapper">
  <resultMap id="BaseResultMap" type="com.is666is.lpl.domain.Info">
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="softwareName" jdbcType="VARCHAR" property="softwareName" />
    <result column="APKName" jdbcType="VARCHAR" property="APKName" />
    <result column="supportROM" jdbcType="VARCHAR" property="supportROM" />
    <result column="interfaceLanguage" jdbcType="VARCHAR" property="interfaceLanguage" />
    <result column="softwareSize" jdbcType="DECIMAL" property="softwareSize" />
    <result column="updateDate" jdbcType="DATE" property="updateDate" />
    <result column="devId" jdbcType="BIGINT" property="devId" />
    <result column="appInfo" jdbcType="VARCHAR" property="appInfo" />
    <result column="onSaleDate" jdbcType="TIMESTAMP" property="onSaleDate" />
    <result column="offSaleDate" jdbcType="TIMESTAMP" property="offSaleDate" />
    <result column="downloads" jdbcType="BIGINT" property="downloads" />
    <result column="createdBy" jdbcType="BIGINT" property="createdBy" />
    <result column="creationDate" jdbcType="TIMESTAMP" property="creationDate" />
    <result column="modifyBy" jdbcType="BIGINT" property="modifyBy" />
    <result column="modifyDate" jdbcType="TIMESTAMP" property="modifyDate" />
    <result column="logoPicPath" jdbcType="VARCHAR" property="logoPicPath" />
    <result column="logoLocPath" jdbcType="VARCHAR" property="logoLocPath" />
    <association property="dictionaryStatus" javaType="Dictionary" select="com.is666is.lpl.mapper.DictionaryMapper.selectInfoId" column="status" fetchType="eager"/>
    <association property="dictionaryFlatformId" javaType="Dictionary" select="com.is666is.lpl.mapper.DictionaryMapper.selectInfoId" column="flatformId" fetchType="eager"/>
    <association property="categoryLevel1" javaType="Category" select="com.is666is.lpl.mapper.CategoryMapper.selectInfoId" column="categoryLevel1" fetchType="eager"/>
    <association property="categoryLevel2" javaType="Category" select="com.is666is.lpl.mapper.CategoryMapper.selectInfoId" column="categoryLevel2" fetchType="eager"/>
    <association property="categoryLevel3" javaType="Category" select="com.is666is.lpl.mapper.CategoryMapper.selectInfoId" column="categoryLevel3" fetchType="eager"/>
    <association property="version" javaType="Version" select="com.is666is.lpl.mapper.VersionMapper.selectInfoId" column="versionId" fetchType="eager"/>

  </resultMap>
  <select id="selectInfo" resultMap="BaseResultMap">
        select * from app_info
        <where>
            <if test="softwareName!=null">
                    and softwareName like concat('%',#{softwareName},'%')
            </if>
            <if test="statusId!=-1 and statusId!=null">
                and status=#{statusId}


            </if>
            <if test="flatformId!=-1 and flatformId!=null">
                    and flatformId=#{flatformId}
            </if>
            <if test="categoryLevel1!=-1 and categoryLevel1!=null">
                <choose>
                <when test="categoryLevel1==1">

                </when>
                <otherwise>
                    and categoryLevel1=#{categoryLevel1}
                </otherwise>
                </choose>

            </if>
            <if test="categoryLevel2!=-1 and categoryLevel2!=null">
                and categoryLevel2=#{categoryLevel2}
            </if>
            <if test="categoryLevel3!=-1 and categoryLevel3!=null">
                and categoryLevel3=#{categoryLevel3}
            </if>
        </where>
  </select>
</mapper>